kind: Job
apiVersion: batch/v1
metadata:
  name: data-backup
  labels:
    app: data-backup
spec:
      template:
        metadata:
          name: data-backup
        spec:
          volumes:
            - name: mysql-backup-sh
              configMap:
                name: mysql-backup-config
  
            - name: time-zone               #挂入宿主机的时区文件
              hostPath:
                path: /etc/localtime
          containers:
            - name: data-backup
              image: 'busybox:1.32.0'       #使用 busybox 镜像执行备份操作
              command:                      #配置要执行的备份命令
                - sh
                - '/var/db/srcipt/backup.sh'            
              volumeMounts:
                - name: mysql-backup-sh
                  mountPath: /var/db/script/backup.sh
                  subPath: backup.sh
                - name: time-zone           #挂载系统时区，防止时区产生的影响
                  mountPath: /etc/localtime
          restartPolicy: Never